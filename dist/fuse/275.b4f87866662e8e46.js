"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[275],{9971:(L,x,r)=>{r.d(x,{d:()=>b});var _=r(8341),a=r(5e3),k=r(8125),I=r(9808),M=r(2494),Z=r(1101),P=r(1377);function R(t,v){if(1&t&&(a.TgZ(0,"fuse-alert",8),a._uU(1),a.qZA()),2&t){const n=a.oxw();a.Q6J("appearance","outline")("showIcon",!1)("type",n.alert.type),a.xp6(1),a.hij(" ",n.alert.message,"\n")}}function u(t,v){1&t&&(a.TgZ(0,"div",9),a._UZ(1,"mat-progress-bar",10),a.qZA())}let b=(()=>{class t{constructor(n,l,f,C){this.nicService=n,this.dialogRef=l,this.data=f,this.cdr=C,this.alert={type:"success",message:""},this.showAlert=!1,this.isSubmitting=!1,console.log(f)}ngOnInit(){}onYesClick(){if("delete-sub-nic"===this.data.action){this.showAlert=!1,this.isSubmitting=!0;const n=Object.assign(Object.assign({},this.data.row),{api_key:this.nicService.apiKey});console.log(n),this.nicService.deleteSubNic(n).subscribe(l=>{console.log("Sub-NIC removed successfully:",l),this.alert={type:"success"===l.status?"success":"error",message:l.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(l)},l=>{console.error("Failed to removed NIC info:",l),this.alert={type:"error",message:"Failed to removed Sub-NIC. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges()}else if("malware-ip-delete"===this.data.action)this.showAlert=!1,this.isSubmitting=!0,this.nicService.deleteMaliciousIP(this.data.row.ip).subscribe(n=>{console.log("Malicious IP removed successfully:",n),this.alert={type:"success"===n.status?"success":"error",message:n.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(n)},n=>{console.error("Failed to removed Malicious info:",n),this.alert={type:"error",message:"Failed to removed Malicious IP. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges();else if("block-ip-delete"===this.data.action)this.showAlert=!1,this.isSubmitting=!0,this.nicService.deleteBlockIP(this.data.row.ip).subscribe(n=>{console.log("Block IP removed successfully:",n),this.alert={type:"success"===n.status?"success":"error",message:n.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(n)},n=>{console.error("Failed to removed Block info:",n),this.alert={type:"error",message:"Failed to removed Block IP. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges();else if("whitelist-ip-delete"===this.data.action)this.showAlert=!1,this.isSubmitting=!0,this.nicService.deleteWhitelistIP(this.data.row.ip).subscribe(n=>{console.log("Whilelist IP removed successfully:",n),this.alert={type:"success"===n.status?"success":"error",message:n.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(n)},n=>{console.error("Failed to removed Whilelist info:",n),this.alert={type:"error",message:"Failed to removed Whilelist IP. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges();else if("geoblock-ip-delete"===this.data.action)this.showAlert=!1,this.isSubmitting=!0,this.nicService.deleteGeoBlockIP(this.data.row.ip).subscribe(n=>{console.log("GeoBlock Country IP removed successfully:",n),this.alert={type:"success"===n.status?"success":"error",message:n.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(n)},n=>{console.error("Failed to removed GeoBlock Country IP:",n),this.alert={type:"error",message:"Failed to removed GeoBlock Country IP. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges();else if("delete-country"===this.data.action)this.showAlert=!1,this.isSubmitting=!0,this.nicService.unBlockCountry(this.data.row.county).subscribe(n=>{console.log("Malicious IP removed successfully:",n),this.alert={type:"success"===n.status?"success":"error",message:n.message},this.showAlert=!0,this.isSubmitting=!1,this.dialogRef.close(n)},n=>{console.error("Failed to removed Malicous info:",n),this.alert={type:"error",message:"Failed to removed Malicious IP. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),this.cdr.detectChanges();else if("delete-web-mod-sec"===this.data.action){this.showAlert=!1,this.isSubmitting=!0;const n={domain:this.data.row.domain_name};console.log(n),this.nicService.deleteModSecApi(n).subscribe(l=>{"success"==l.api_status?(console.log("Mod Sec removed successfully:",l),this.alert={type:"success"===l.status?"success":"error",message:l.message},this.showAlert=!0,this.isSubmitting=!1):(console.log("Error:",l),this.alert={type:"success"===l.status?"success":"error",message:l.message},this.showAlert=!0,this.isSubmitting=!1),this.dialogRef.close(l)},l=>{console.error("Failed to removed Mod Sec info:",l),this.alert={type:"error",message:"Failed to removed Mod Sec. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),console.log(this.data.row.domain_name)}else if("delete-email-gw-sec"===this.data.action){this.showAlert=!1,this.isSubmitting=!0;const n={domain:this.data.row.domain,my_network:this.data.row.network};console.log(n),this.nicService.deleteEmailGwApi(n).subscribe(l=>{"success"==l.api_status?(console.log("Email Gateway removed successfully:",l),this.alert={type:"success"===l.status?"success":"error",message:l.message},this.showAlert=!0,this.isSubmitting=!1):(console.log("Error:",l),this.alert={type:"success"===l.status?"success":"error",message:l.message},this.showAlert=!0,this.isSubmitting=!1),this.dialogRef.close(l)},l=>{console.error("Failed to removed Mod Sec info:",l),this.alert={type:"error",message:"Failed to removed Mod Sec. Please try again."},this.showAlert=!0,this.isSubmitting=!1}),console.log(this.data.row.domain_name)}else console.log("Unhandled action:",this.data.action)}}return t.\u0275fac=function(n){return new(n||t)(a.Y36(k.N),a.Y36(_.so),a.Y36(_.WI),a.Y36(a.sBO))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-warning-dialog"]],decls:12,vars:10,consts:[["mat-dialog-title","",1,"rounded-t-lg","font-semibold"],[1,"border-gray-300","-mt-3","mb-2"],["class","mt-2 mb-4",3,"appearance","showIcon","type",4,"ngIf"],["class","flex justify-center items-center my-4",4,"ngIf"],[1,"px-8"],[1,"flex","justify-end","space-x-4","p-4"],["mat-button","","mat-dialog-close","","cdkFocusInitial","",1,"px-4","py-2","border","hover:bg-primary","rounded-md","bg-gray-200",3,"disabled"],["mat-button","",1,"px-4","py-2","border","rounded-md","hover:bg-warn","bg-gray-200",3,"disabled","click"],[1,"mt-2","mb-4",3,"appearance","showIcon","type"],[1,"flex","justify-center","items-center","my-4"],["mode","indeterminate",1,"w-full"]],template:function(n,l){1&n&&(a.TgZ(0,"h2",0),a._uU(1),a.qZA(),a._UZ(2,"hr",1),a.YNc(3,R,2,4,"fuse-alert",2),a.YNc(4,u,2,0,"div",3),a.TgZ(5,"mat-dialog-content",4),a._uU(6),a.qZA(),a.TgZ(7,"mat-dialog-actions",5)(8,"button",6),a._uU(9,"No"),a.qZA(),a.TgZ(10,"button",7),a.NdJ("click",function(){return l.onYesClick()}),a._uU(11,"Yes"),a.qZA()()),2&n&&(a.xp6(1),a.xDo("",l.data.title,' "',l.data.row.domain_name,"",l.data.row.nic_name,"",l.data.row.ip,"",l.data.row.country,'"'),a.xp6(2),a.Q6J("ngIf",l.showAlert),a.xp6(1),a.Q6J("ngIf",l.isSubmitting),a.xp6(2),a.hij(" ",l.data.message,"\n"),a.xp6(2),a.Q6J("disabled",l.isSubmitting),a.xp6(2),a.Q6J("disabled",l.isSubmitting))},directives:[_.uh,I.O5,M.W,Z.pW,_.xY,_.H8,P.lW,_.ZT],styles:["button[_ngcontent-%COMP%]{margin-right:8px}"]}),t})()},6800:(L,x,r)=>{r.r(x),r.d(x,{GeoBlockingModule:()=>St});var _=r(325),a=r(1377),k=r(1279),I=r(4466),M=r(5804),Z=r(1086),P=r(7221),R=r(9971),u=r(3075),b=r(8341),t=r(5e3),v=r(8125),n=r(9808),l=r(2494),f=r(1223),C=r(6766),E=r(6808);function W(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"fuse-alert",16),t.NdJ("dismissed",function(){return t.CHM(e),t.oxw().showAlert=!1}),t._uU(1),t.qZA()}if(2&s){const e=t.oxw();t.Q6J("type",e.alert.type)("dismissible",!0),t.xp6(1),t.hij(" ",e.alert.message," ")}}function z(s,c){1&s&&(t.TgZ(0,"small",17),t._uU(1," Invalid IP Address. "),t.qZA())}function H(s,c){1&s&&t._UZ(0,"mat-progress-spinner",18),2&s&&t.Q6J("diameter",24)("mode","indeterminate")}let K=(()=>{class s{constructor(e,i,o,d,m){this.dialogRef=e,this.data=i,this.nicService=o,this.cdr=d,this.fb=m,this.errorAlert={type:"error",message:""},this.alert={type:"error",message:"Error!"},this.showAlert=!1,this.isSubmitting=!1,console.log(this.data.row),this.addGeoBlockIPForm=this.fb.group({ip_address:["",[u.kI.required,u.kI.pattern(/^(\d{1,3}\.){3}\d{1,3}((:\d{1,5})|(\/\d{1,2}))?$/)]]})}ngOnInit(){}closeDialog(){this.dialogRef.close("Dialog Closed")}onSubmit(){if(this.addGeoBlockIPForm.invalid)return this.showAlert=!0,this.errorAlert.message="Please fill all required fields correctly.",void(this.errorAlert.type="error");this.isSubmitting=!0;const e=this.addGeoBlockIPForm.value,i=new FormData;i.append("ip_address",e.ip_address),this.nicService.addGeoBlockIP(i).subscribe(o=>{this.isSubmitting=!1,this.showAlert=!0,this.alert.type="success",this.alert.message="IP Added successfully!",this.cdr.detectChanges(),setTimeout(()=>{this.dialogRef.close(i)},2e3)},o=>{this.isSubmitting=!1,this.showAlert=!0,this.alert.type="error",this.alert.message="Failed to add IP address. Please try again.",console.error("Error:",o),this.cdr.detectChanges()})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(b.so),t.Y36(b.WI),t.Y36(v.N),t.Y36(t.sBO),t.Y36(u.qu))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-add-geoblock-ip"]],decls:21,vars:7,consts:[[1,"dialog-content"],[1,"dialog-header","bg-primary","rounded-t-2xl","p-2","px-4","flex","justify-between","items-center"],[1,"text-xl","font-semibold","leading-none","tracking-tight","text-white"],["mat-icon-button","",3,"click"],[1,"text-white"],[3,"type","dismissible","dismissed",4,"ngIf"],[1,"rounded-lg",3,"formGroup","ngSubmit"],[1,"dialog-body"],[1,"flex","justify-center","px-3"],["appearance","standard",1,"w-full"],[1,"block","font-semibold","mb-1"],["matInput","","type","text","formControlName","ip_address","placeholder","x.x.x.x"],["class","error",4,"ngIf"],["align","end",1,"mt-2"],["type","submit","mat-flat-button","",1,"fuse-mat-button-medium","w-28",3,"color","disabled"],["class","ml-3",3,"diameter","mode",4,"ngIf"],[3,"type","dismissible","dismissed"],[1,"error"],[1,"ml-3",3,"diameter","mode"]],template:function(e,i){if(1&e&&(t.TgZ(0,"mat-dialog-content",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA(),t.TgZ(4,"button",3),t.NdJ("click",function(){return i.closeDialog()}),t.TgZ(5,"mat-icon",4),t._uU(6,"close"),t.qZA()()(),t.YNc(7,W,2,3,"fuse-alert",5),t.TgZ(8,"form",6),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-label",10),t._uU(13,"Enter IP Address"),t.qZA(),t._UZ(14,"input",11),t.YNc(15,z,2,0,"small",12),t.qZA()()(),t.TgZ(16,"div",13)(17,"button",14)(18,"span"),t._uU(19," Submit "),t.qZA(),t.YNc(20,H,1,2,"mat-progress-spinner",15),t.qZA()()()()),2&e){let o;t.xp6(3),t.hij(" ",i.data.title," "),t.xp6(4),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("formGroup",i.addGeoBlockIPForm),t.xp6(7),t.Q6J("ngIf",(null==(o=i.addGeoBlockIPForm.get("ip_address"))?null:o.invalid)&&(null==(o=i.addGeoBlockIPForm.get("ip_address"))?null:o.touched)),t.xp6(2),t.Q6J("color","primary")("disabled",i.addGeoBlockIPForm.invalid||i.addGeoBlockIPForm.hasError("nonUniqueSelection")),t.xp6(3),t.Q6J("ngIf",i.isSubmitting)}},directives:[b.xY,a.lW,k.Hw,n.O5,l.W,u._Y,u.JL,u.sg,f.KE,f.hX,C.Nt,u.Fj,u.JJ,u.u,E.Ou],styles:[""]}),s})();var S=r(4038),y=r(8),F=r(6201),A=r(8929),X=r(2986),V=r(7625),g=r(1777),O=r(1879),G=r(5278),q=r(4565);function $(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"div",1)(1,"button",2),t.NdJ("click",function(){return t.CHM(e),t.oxw().action()}),t._uU(2),t.qZA()()}if(2&s){const e=t.oxw();t.xp6(2),t.Oqu(e.data.action)}}function tt(s,c){}const U=new t.OlP("MatSnackBarData");class w{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}}const et=Math.pow(2,31)-1;class D{constructor(c,e){this._overlayRef=e,this._afterDismissed=new A.xQ,this._afterOpened=new A.xQ,this._onAction=new A.xQ,this._dismissedByAction=!1,this.containerInstance=c,this.onAction().subscribe(()=>this.dismiss()),c._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(c){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(c,et))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}}let it=(()=>{class s{constructor(e,i){this.snackBarRef=e,this.data=i}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(D),t.Y36(U))},s.\u0275cmp=t.Xpm({type:s,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-simple-snackbar"],decls:3,vars:2,consts:[["class","mat-simple-snackbar-action",4,"ngIf"],[1,"mat-simple-snackbar-action"],["mat-button","",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"span"),t._uU(1),t.qZA(),t.YNc(2,$,3,1,"div",0)),2&e&&(t.xp6(1),t.Oqu(i.data.message),t.xp6(1),t.Q6J("ngIf",i.hasAction))},directives:[n.O5,a.lW],styles:[".mat-simple-snackbar{display:flex;justify-content:space-between;align-items:center;line-height:20px;opacity:1}.mat-simple-snackbar-action{flex-shrink:0;margin:-8px -8px -8px 8px}.mat-simple-snackbar-action button{max-height:36px;min-width:0}[dir=rtl] .mat-simple-snackbar-action{margin-left:-8px;margin-right:8px}\n"],encapsulation:2,changeDetection:0}),s})();const st={snackBarState:(0,g.X$)("state",[(0,g.SB)("void, hidden",(0,g.oB)({transform:"scale(0.8)",opacity:0})),(0,g.SB)("visible",(0,g.oB)({transform:"scale(1)",opacity:1})),(0,g.eR)("* => visible",(0,g.jt)("150ms cubic-bezier(0, 0, 0.2, 1)")),(0,g.eR)("* => void, * => hidden",(0,g.jt)("75ms cubic-bezier(0.4, 0.0, 1, 1)",(0,g.oB)({opacity:0})))])};let ot=(()=>{class s extends y.en{constructor(e,i,o,d,m){super(),this._ngZone=e,this._elementRef=i,this._changeDetectorRef=o,this._platform=d,this.snackBarConfig=m,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new A.xQ,this._onExit=new A.xQ,this._onEnter=new A.xQ,this._animationState="void",this.attachDomPortal=h=>(this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachDomPortal(h)),this._live="assertive"!==m.politeness||m.announcementMessage?"off"===m.politeness?"off":"polite":"assertive",this._platform.FIREFOX&&("polite"===this._live&&(this._role="status"),"assertive"===this._live&&(this._role="alert"))}attachComponentPortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._assertNotAttached(),this._applySnackBarClasses(),this._portalOutlet.attachTemplatePortal(e)}onAnimationEnd(e){const{fromState:i,toState:o}=e;if(("void"===o&&"void"!==i||"hidden"===o)&&this._completeExit(),"visible"===o){const d=this._onEnter;this._ngZone.run(()=>{d.next(),d.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._animationState="hidden",this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId),this._onExit}ngOnDestroy(){this._destroyed=!0,this._completeExit()}_completeExit(){this._ngZone.onMicrotaskEmpty.pipe((0,X.q)(1)).subscribe(()=>{this._onExit.next(),this._onExit.complete()})}_applySnackBarClasses(){const e=this._elementRef.nativeElement,i=this.snackBarConfig.panelClass;i&&(Array.isArray(i)?i.forEach(o=>e.classList.add(o)):e.classList.add(i)),"center"===this.snackBarConfig.horizontalPosition&&e.classList.add("mat-snack-bar-center"),"top"===this.snackBarConfig.verticalPosition&&e.classList.add("mat-snack-bar-top")}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{const e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),i=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&i){let o=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(o=document.activeElement),e.removeAttribute("aria-hidden"),i.appendChild(e),null==o||o.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(t.R0b),t.Y36(t.SBq),t.Y36(t.sBO),t.Y36(q.t4),t.Y36(w))},s.\u0275cmp=t.Xpm({type:s,selectors:[["snack-bar-container"]],viewQuery:function(e,i){if(1&e&&t.Gf(y.Pl,7),2&e){let o;t.iGM(o=t.CRH())&&(i._portalOutlet=o.first)}},hostAttrs:[1,"mat-snack-bar-container"],hostVars:1,hostBindings:function(e,i){1&e&&t.WFA("@state.done",function(d){return i.onAnimationEnd(d)}),2&e&&t.d8E("@state",i._animationState)},features:[t.qOj],decls:3,vars:2,consts:[["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.YNc(1,tt,0,0,"ng-template",1),t.qZA(),t._UZ(2,"div")),2&e&&(t.xp6(2),t.uIk("aria-live",i._live)("role",i._role))},directives:[y.Pl],styles:[".mat-snack-bar-container{border-radius:4px;box-sizing:border-box;display:block;margin:24px;max-width:33vw;min-width:344px;padding:14px 16px;min-height:48px;transform-origin:center}.cdk-high-contrast-active .mat-snack-bar-container{border:solid 1px}.mat-snack-bar-handset{width:100%}.mat-snack-bar-handset .mat-snack-bar-container{margin:8px;max-width:100%;min-width:0;width:100%}\n"],encapsulation:2,data:{animation:[st.snackBarState]}}),s})(),J=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[S.U8,y.eL,n.ez,a.ot,F.BQ],F.BQ]}),s})();const N=new t.OlP("mat-snack-bar-default-options",{providedIn:"root",factory:function nt(){return new w}});let at=(()=>{class s{constructor(e,i,o,d,m,h){this._overlay=e,this._live=i,this._injector=o,this._breakpointObserver=d,this._parentSnackBar=m,this._defaultConfig=h,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=it,this.snackBarContainerComponent=ot,this.handsetCssClass="mat-snack-bar-handset"}get _openedSnackBarRef(){const e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}openFromComponent(e,i){return this._attach(e,i)}openFromTemplate(e,i){return this._attach(e,i)}open(e,i="",o){const d=Object.assign(Object.assign({},this._defaultConfig),o);return d.data={message:e,action:i},d.announcementMessage===e&&(d.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,d)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,i){const d=t.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:w,useValue:i}]}),m=new y.C5(this.snackBarContainerComponent,i.viewContainerRef,d),h=e.attach(m);return h.instance.snackBarConfig=i,h.instance}_attach(e,i){const o=Object.assign(Object.assign(Object.assign({},new w),this._defaultConfig),i),d=this._createOverlay(o),m=this._attachSnackBarContainer(d,o),h=new D(m,d);if(e instanceof t.Rgc){const B=new y.UE(e,null,{$implicit:o.data,snackBarRef:h});h.instance=m.attachTemplatePortal(B)}else{const B=this._createInjector(o,h),T=new y.C5(e,void 0,B),wt=m.attachComponentPortal(T);h.instance=wt.instance}return this._breakpointObserver.observe(G.u3.HandsetPortrait).pipe((0,V.R)(d.detachments())).subscribe(B=>{const T=d.overlayElement.classList;B.matches?T.add(this.handsetCssClass):T.remove(this.handsetCssClass)}),o.announcementMessage&&m._onAnnounce.subscribe(()=>{this._live.announce(o.announcementMessage,o.politeness)}),this._animateSnackBar(h,o),this._openedSnackBarRef=h,this._openedSnackBarRef}_animateSnackBar(e,i){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),i.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),i.duration&&i.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(i.duration))}_createOverlay(e){const i=new S.X_;i.direction=e.direction;let o=this._overlay.position().global();const d="rtl"===e.direction,m="left"===e.horizontalPosition||"start"===e.horizontalPosition&&!d||"end"===e.horizontalPosition&&d,h=!m&&"center"!==e.horizontalPosition;return m?o.left("0"):h?o.right("0"):o.centerHorizontally(),"top"===e.verticalPosition?o.top("0"):o.bottom("0"),i.positionStrategy=o,this._overlay.create(i)}_createInjector(e,i){return t.zs3.create({parent:e&&e.viewContainerRef&&e.viewContainerRef.injector||this._injector,providers:[{provide:D,useValue:i},{provide:U,useValue:e.data}]})}}return s.\u0275fac=function(e){return new(e||s)(t.LFG(S.aV),t.LFG(O.Kd),t.LFG(t.zs3),t.LFG(G.Yg),t.LFG(s,12),t.LFG(N))},s.\u0275prov=t.Yz7({factory:function(){return new s(t.LFG(S.aV),t.LFG(O.Kd),t.LFG(t.gxx),t.LFG(G.Yg),t.LFG(s,12),t.LFG(N))},token:s,providedIn:J}),s})();var Y=r(1101),p=r(1149),Q=r(9824),rt=r(1218);function lt(s,c){1&s&&(t.TgZ(0,"div",36),t._UZ(1,"mat-progress-bar",37),t.qZA())}function ct(s,c){1&s&&(t.TgZ(0,"th",38),t._uU(1,"Country Code"),t.qZA())}function dt(s,c){if(1&s&&(t.TgZ(0,"td",39),t._uU(1),t.qZA()),2&s){const e=c.$implicit;t.xp6(1),t.Oqu(e)}}function mt(s,c){1&s&&(t.TgZ(0,"th",38),t._uU(1,"Action"),t.qZA())}function ut(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"td",39)(1,"button",40),t.NdJ("click",function(){const d=t.CHM(e).$implicit;return t.oxw().deleteCountry(d)}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function ht(s,c){1&s&&t._UZ(0,"tr",41)}function pt(s,c){1&s&&t._UZ(0,"tr",42)}function gt(s,c){if(1&s&&(t.TgZ(0,"fuse-alert",45),t._uU(1),t.qZA()),2&s){const e=t.oxw(2);t.Q6J("appearance","outline")("showIcon",!0)("type",e.alert.type),t.xp6(1),t.hij(" ",e.alert.message," ")}}function ft(s,c){if(1&s&&(t.TgZ(0,"div",43),t.YNc(1,gt,2,4,"fuse-alert",44),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showAlert)}}function _t(s,c){1&s&&(t.TgZ(0,"div",46),t._UZ(1,"mat-progress-bar",37),t.qZA())}function bt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",47),t.NdJ("click",function(){return t.CHM(e),t.oxw().AddGeoBlockIP()}),t.TgZ(1,"mat-icon",10),t._uU(2,"add"),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("disabled",e.loadingip)}}function vt(s,c){if(1&s){const e=t.EpF();t.TgZ(0,"button",48),t.NdJ("click",function(){return t.CHM(e),t.oxw().refreshTable()}),t.TgZ(1,"mat-icon",10),t._uU(2,"refresh"),t.qZA()()}if(2&s){const e=t.oxw();t.Q6J("disabled",e.loadingip)}}const j=function(){return["code","action"]};let yt=(()=>{class s{constructor(e,i,o){this.nicService=e,this.snackBar=i,this.dialog=o,this.countries=[],this.countryCode="",this.loading=!1,this.alert={type:"success",message:""},this.showAlert=!1,this.loadingip=!1,this.headerMapping={ip:"IP",geoblock_status:"Status",geoblock_action:"Action"},this.displayedColumns=["ip","geoblock_status","geoblock_action"],this.geoblockIps=[],this.getGeoBlockFileList()}showTimedAlert(e,i){this.alert.type=e,this.alert.message=i,this.showAlert=!0,setTimeout(()=>{this.showAlert=!1},2e3)}getGeoBlockFileList(){this.loadingip=!0,this.nicService.getGeoBlockIpListData().pipe((0,P.K)(e=>(this.showTimedAlert("error","Error Fetching Data"),this.loadingip=!1,(0,Z.of)({api_status:"error",message:"Failed to fetch data"})))).subscribe(e=>{this.showAlert=!1,"success"===e.api_status?(this.loadingip=!1,console.log(e.data),this.geoblockIps=e.data.map(i=>({ip:i})),this.showTimedAlert("success","Updated Successfully")):(this.showTimedAlert("error",e.message||"Unknown error"),this.loadingip=!1)})}onEditRow(e){"geoblock-ip-delete"===e.sep&&this.dialog.open(R.d,{width:"700px",disableClose:!0,data:{title:"Delete GeoBlock",row:e,message:"Are you sure you want to delete GeoBlock IP "+e.ip+"?",action:"geoblock-ip-delete"}}).afterClosed().subscribe(o=>{this.refreshTable(),this.showTimedAlert("success","Updated successfully")})}refreshTable(){this.loadingip=!0,this.getGeoBlockFileList()}AddGeoBlockIP(){this.dialog.open(K,{width:"500px",disableClose:!1,data:{title:"Add GeoBlock IP",row:"",sep:"add"}}).afterClosed().subscribe(i=>{this.refreshTable(),this.showTimedAlert("success","Updated successfully")})}ngOnInit(){this.loadCountries()}loadCountries(){this.loading=!0,this.nicService.viewBlockedCountries().subscribe({next:e=>{console.log("API Response:",e),this.countries=e.data||[],this.loading=!1},error:()=>{this.loading=!1}})}addCountry(){!this.countryCode.trim()||(this.loading=!0,this.nicService.addBlockedCountry(this.countryCode.trim()).subscribe({next:e=>{this.snackBar.open(e.message,"Close",{duration:2e3}),this.loadCountries(),this.countryCode=""},error:()=>this.loading=!1}))}execCountryCode(){this.loading=!0,this.nicService.execCountryCode().subscribe({next:e=>{this.snackBar.open(e.message,"Close",{duration:2e3})},error:()=>this.loading=!1})}deleteCountry(e){this.loading=!0,this.nicService.deleteBlockedCountry(e).subscribe({next:i=>{this.snackBar.open(i.message,"Close",{duration:2e3}),this.loadCountries()},error:()=>this.loading=!1})}}return s.\u0275fac=function(e){return new(e||s)(t.Y36(v.N),t.Y36(at),t.Y36(b.uw))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-geo-blocking"]],decls:51,vars:17,consts:[[1,"flex","flex-col","w-full"],[1,"flex","flex-auto","sm:p-5"],[1,"flex","flex-col","flex-auto","w-full"],["class","flex justify-center items-center",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-1","lg:grid-cols-1"],[1,"grid","grid-cols-2","sm:grid-cols-2","lg:grid-cols-2","rounded-t-xl","bg-primary-500","py-4"],[1,"justify-self-start","flex","items-center"],[1,"text-xl","font-bold","leading-none","tracking-tight","text-white","pl-5"],[1,"justify-self-end","m-2","mr-4","flex","items-center","gap-2"],["mat-icon-button","",1,"bg-white","rounded-full",3,"disabled","click"],[1,"text-primary"],[1,"bg-card","p-4","rounded-b-xl","space-y-4"],[1,"grid","grid-cols-1","sm:grid-cols-2","gap-4"],["appearance","outline",1,"w-full"],["matInput","","placeholder","e.g. RU",3,"ngModel","ngModelChange"],[1,"flex","items-center"],["mat-flat-button","","color","primary",3,"disabled","click"],[1,"mt-4"],["mat-table","",1,"w-full","mat-elevation-z2","rounded-xl","overflow-hidden",3,"dataSource"],["matColumnDef","code"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","action"],["mat-header-row","","class","bg-gray-100",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"flex","flex-auto","p-3","sm:p-5"],["class","mb-8",4,"ngIf"],["class","flex justify-center items-center my-4",4,"ngIf"],[1,"grid","grid-cols-1","sm:grid-cols-1","lg:grid-cols-1","mb-4"],[1,"grid","grid-cols-2","sm:grid-cols-2","lg:grid-cols-2","rounded-t-xl","bg-primary-500"],[1,"justify-self-end","m-2","mr-4"],["matTooltip","Add IP","class","px-2 mr-2 pt-1 bg-white text-white rounded-md",3,"disabled","click",4,"ngIf"],["matTooltip","Refresh","class","px-2 pt-1 bg-white text-white rounded-md",3,"disabled","click",4,"ngIf"],[1,"bg-card","rounded-b-2xl","grid","grid-cols-1","sm:grid-cols-1","lg:grid-cols-1","mb-4","rounded-b-2xl"],[1,"flex","flex-col","px-5","pt-4","pb-2","shadow","overflow-hidden","bg-card"],[3,"data","displayedColumns","headerMapping","editRow"],[1,"flex","justify-center","items-center"],["mode","indeterminate",1,"w-full"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","warn",3,"click"],["mat-header-row","",1,"bg-gray-100"],["mat-row",""],[1,"mb-8"],["class","mt-0 -mb-2",3,"appearance","showIcon","type",4,"ngIf"],[1,"mt-0","-mb-2",3,"appearance","showIcon","type"],[1,"flex","justify-center","items-center","my-4"],["matTooltip","Add IP",1,"px-2","mr-2","pt-1","bg-white","text-white","rounded-md",3,"disabled","click"],["matTooltip","Refresh",1,"px-2","pt-1","bg-white","text-white","rounded-md",3,"disabled","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,lt,2,0,"div",3),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._uU(8,"Geo Block"),t.qZA()(),t.TgZ(9,"div",8)(10,"button",9),t.NdJ("click",function(){return i.loadCountries()}),t.TgZ(11,"mat-icon",10),t._uU(12,"refresh"),t.qZA()()()()(),t.TgZ(13,"div",11)(14,"div",12)(15,"mat-form-field",13)(16,"mat-label"),t._uU(17,"Country Code"),t.qZA(),t.TgZ(18,"input",14),t.NdJ("ngModelChange",function(d){return i.countryCode=d}),t.qZA()(),t.TgZ(19,"div",15)(20,"button",16),t.NdJ("click",function(){return i.addCountry()}),t._uU(21,"Add Country"),t.qZA()(),t.TgZ(22,"div",15)(23,"button",16),t.NdJ("click",function(){return i.execCountryCode()}),t._uU(24,"Execute County Blcok Script"),t.qZA()()(),t.TgZ(25,"div",17)(26,"table",18),t.ynx(27,19),t.YNc(28,ct,2,0,"th",20),t.YNc(29,dt,2,1,"td",21),t.BQk(),t.ynx(30,22),t.YNc(31,mt,2,0,"th",20),t.YNc(32,ut,4,0,"td",21),t.BQk(),t.YNc(33,ht,1,0,"tr",23),t.YNc(34,pt,1,0,"tr",24),t.qZA()()()()(),t.TgZ(35,"div",25)(36,"div",2),t.YNc(37,ft,2,1,"div",26),t.YNc(38,_t,2,0,"div",27),t.TgZ(39,"div",28)(40,"div",29)(41,"div",6)(42,"div",7),t._uU(43," Geo Block IPs List "),t.qZA()(),t.TgZ(44,"div",30),t.YNc(45,bt,3,1,"button",31),t.YNc(46,vt,3,1,"button",32),t.qZA()(),t.TgZ(47,"div",33)(48,"div")(49,"div",34)(50,"app-dynamic-table",35),t.NdJ("editRow",function(d){return i.onEditRow(d)}),t.qZA()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("ngIf",i.loading),t.xp6(7),t.Q6J("disabled",i.loading),t.xp6(8),t.Q6J("ngModel",i.countryCode),t.xp6(2),t.Q6J("disabled",i.loading),t.xp6(3),t.Q6J("disabled",i.loading),t.xp6(3),t.Q6J("dataSource",i.countries),t.xp6(7),t.Q6J("matHeaderRowDef",t.DdM(15,j)),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(16,j)),t.xp6(3),t.Q6J("ngIf",i.showAlert),t.xp6(1),t.Q6J("ngIf",i.loadingip),t.xp6(7),t.Q6J("ngIf",!i.loadingip),t.xp6(1),t.Q6J("ngIf",!i.loadingip),t.xp6(4),t.Q6J("data",i.geoblockIps)("displayedColumns",i.displayedColumns)("headerMapping",i.headerMapping))},directives:[n.O5,Y.pW,a.lW,k.Hw,f.KE,f.hX,C.Nt,u.Fj,u.JJ,u.On,p.BZ,p.w1,p.fO,p.ge,p.Dz,p.ev,p.as,p.XQ,p.nj,p.Gk,l.W,Q.gM,rt.Q],encapsulation:2}),s})();var kt=r(8558),Ct=r(7775),At=r(797),Bt=r(9722);const xt=[{path:"",component:yt}];let St=(()=>{class s{}return s.\u0275fac=function(e){return new(e||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[[_.Bz.forChild(xt),a.ot,k.Ps,b.Is,M.J,f.lN,C.c,I.m,n.ez,u.u5,p.p0,C.c,a.ot,k.Ps,J,Y.Cv,kt.rP,Ct.fC,At.c,Q.AV,E.Cq,Bt.LD]]}),s})()}}]);